***이 글은 스프링 부트로 배우는 자바 웹 개발 을 참고해서 쓴 글입니다.***
# 1. 웹 애플리케이션 컨테이너
## 1.1 개요
웹 애플리케이션 컨테이너란 웹 애플리케이션이 배포되는 공간을 뜻한다.
일반적으로 HTML과 같은 정적 파일을 전당해 주는 역활을 웹 서버라 칭하고,
동적인 페이지들을 생성 가능한 서버를 웹 애츨리케이션 서버(WAS) 한다.
WAS가 어떻게 웹 애플리케이션을 인식하고 동작하는지 알기위해 클래스 로더를 알아야한다.
    
## 1.2 클래스 로더
자바는 플랫폼에 상관없이 사용할수 있는 특징이 있는데, 이 특징을 실행하게 한 기술이
클래스 로더 이다. 자바 코드를 작성한 후 컴파일 하면 해당 코드는 JVM에서 실행
가능한 상태가 되는데, 이때 JVM이 클래스를 실행하기 위해 클래스를 로덩하는 과정이 필요한데,
이 역활을 클래스 로더가 해준다.
    
클래스 로더는 4가지 특징을 가지고 있다.
첫번째 구조가 계층적이다. 상위 클래스 로더에서 하위 클래스 로더를 갖는 방식이며,
최상위 클래스 로더는 부트스트랩 클래스 로더다.
두번째 클래스 로딩을 위임할 수 있다.
세번째 클래스 로더는 클래스를 로딩할 때 가능한 범위가 있다.
자식 클래스 로더는 클래스 로딩 요청 위임을 통해 부모 클래스 로더가 로딩한 클래스를
찾을수 있지만, 부모 클래스 로더는 자식 클래스 로더가 로딩한 클래스를 알수 없다.
네번째 클래스 언로딩 불가능 이다. 즉 클래스 로더로 로딩한 클래스들을 언로딩 할 수 없다.
    
클래스 로더에는 네가지 유형이 있는데, 최상위에 부트스트랩 클래스 로더, 그 다음 계층에
확장 클래스 로더, 그 다음 계층에 시스템 클래스 로더, 그 다음 계층에 개발자가 만든
사용자 정의 클래스 로더가 있다.
부트스트랩 클래스 로더는 JVM 런타임 실행을 위해 기반이 되는 파일을 로드한다.
부트스트랩 로더가 로딩이 끝나면 확장 클래스 로더가 자바의 최상위 객체인 Object를
포함한 자바 API를 로드한다. 확장 로더가 끝나면 시스템 클래스 로더가 클래스패스에 포함된
클래스들을 로드한다.
클래스 로더는 이와 같은 계층을 가지고 있으며, 사용자는 시스템 클래스 로더가 로드하는
클래스 패스 영역에만 접근할 수 있다.
    
## 1.3 WAR 파일의 특성
배포할 때 로컬 실행 프로그램은 JAR로 패키징하고 웹은 WAR로 패키징 한다.
WAR는 압축 파일에 자바 관련 규악이 포함된 것으로 바로 WEB-INF 폴더다.
웹 애플리케이션 컨테이너는 WAR 파일의 WEB-INF 폴더를 기준으로 클래스 파일들을 로드한다.
    
content directory 는 webapp 또는 web 과 같은 이름으로 브라우저에 보여줘야하는
정적 자원을 관리하기 위한 폴더다. 이 폴더는 브라우저상에서 직접 접근할 수 있어서
WEB-INF 하위에 설정하는 추세다. WAR로 패키징하면 클래스 파일들은 WEB-INF 하위
classes 폴더에 저장된다. lib 폴더에는 JAR형식의 외부 라이브러리들이 있는데,
사용자 정의 클래스 로더, 웹 애플리케이션 컨테이너의 로더를 통해 클래스패스에 추가된다.
    
웹 애플리케이션 클래스 로더는 클래스 로더의 유형 중에서 시스템 클래스 로더 하위에 사용자가
정의한 클래스 로더에 해당한다. 이는 웹 애플리케이션 자체 API를 제공하기 위한 컨테이너를 로드하는
클래스 로더와 사용자가 추가한 JSP 나 WAR 파일들을 다루기 위한 ServletContext Loader를 사용한다.
컨테이너가 시작되고 콘텍스트가 초기화되면 서블릿 스펙의 사항의 따라 WEB-INF/classes 파일을 먼저 검색해
로딩하고, 그 후에 WEB-INF/lib에 있는 JAR 파일들을 로드한다.
    